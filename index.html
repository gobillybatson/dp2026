<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Scoreboard</title>
  <style>
    :root{
      --bg:#0b0f17; --card:#121a2a; --text:#e8eefc; --muted:#93a4c7; --line:#22304d;
      --good:#3ddc97; --bad:#ff6b6b;
      --score-font: "Bangers", "Impact", "Arial Black", "Trebuchet MS", system-ui, sans-serif;
    }
    *{ box-sizing:border-box; }
    body{ margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; background:var(--bg); color:var(--text); }
    a{ color:var(--text); text-decoration:none; }
    a:hover{ text-decoration:underline; }
    header{ max-width: 980px; margin:0 auto; padding:18px 16px 10px; }
    h1{ margin:0; font-size:32px; text-shadow: 0 0 8px #7df9ff, 0 0 16px rgba(125,249,255,.8), 0 0 26px rgba(125,249,255,.6); }
    .title-spacer{ height: 0; } /* title replaced by Ozzy image near scoreboard */

    /* Ozzy title image positioned at the top of the scoreboard */
    .ozzy-top{
      position: absolute;
      top: -240px; /* sits directly on the top edge of the scoreboard frame */
      left: 20px;
      width: 320px;
      height: auto;
      z-index: 6;
      filter: drop-shadow(0 0 10px rgba(255,0,0,.55));
      user-select: none;
      pointer-events: none;
    }

    @media (max-width: 720px){
      .ozzy-top{
      position: absolute;
      top: -130px; /* sits directly on the top edge of the scoreboard frame */
      left: 20px;
      width: 320px;
      height: auto;
      z-index: 6;
      filter: drop-shadow(0 0 10px rgba(255,0,0,.55));
      user-select: none;
      pointer-events: none;
    }
    }
    .title-image{
      max-width: 360px;
      height: auto;
      display: block;
      margin-bottom: 40px; /* pushes Ozzy down toward scoreboard */
      filter: drop-shadow(0 0 10px rgba(255,0,0,.55));
    }
    .sub{ margin:6px 0 0; color:var(--muted); }
    main{ max-width: 980px; margin:0 auto; padding: 10px 16px 18px; }
    .card{ background:var(--card); border:1px solid var(--line); border-radius:18px; overflow:hidden; }
    .pad{ padding:16px; }
    table{ 
      width:100%; 
      border-collapse:collapse; 
      font-family: var(--score-font);
    }
    th,td{ padding:10px 12px; border-bottom:1px solid var(--line); text-align:left; }
    th{ font-size:14px; letter-spacing:.12em; text-transform:uppercase; color:var(--muted); }
    tr:last-child td{ border-bottom:none; }
    .rank{
      width:80px;
      font-size:20px;
      color:#e8eefc;
      letter-spacing:.04em;
      text-shadow:
        0 0 1px rgba(232,238,252,.9),
        0 0 6px rgba(125,249,255,.45);
    }
    .score{ width:130px; text-align:right; font-variant-numeric: tabular-nums; transition: transform .25s ease, color .25s ease; }
    
    /* Desktop defaults for responsive classes (keeps large-screen look unchanged) */
    .player-cell{ font-size:26px; letter-spacing:1px; }
    .score-cell{ font-size:32px; }
.right{ text-align:right; }
    .row{ display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; }
    .pill{ color:var(--muted); font-size:12px; border:1px solid var(--line); padding:2px 10px; border-radius:999px; }
    .btn{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px; border-radius:12px;
      border:1px solid var(--line); background:transparent; color:var(--text);
      cursor:pointer; font:inherit;
    }
    .btn:hover{ border-color:#2f3f63; }
    .list{ margin:12px 0 0; padding:0; list-style:none; }
    .list li{ padding:12px; border:1px solid var(--line); border-radius:12px; margin-bottom:10px; }
    .muted{ color:var(--muted); }
    .small{ font-size:12px; }
    .hide{ display:none !important; }

    @media (max-width: 520px){
      .rank{ width:60px; }
    }
  
    /* --- Player Picks Enhancements --- */
.pick-item{
  position: relative;
  padding-left: 64px;
  font-family: var(--score-font);
  font-size: 26px;
  letter-spacing: .5px;
  border-radius: 18px;
  text-shadow:
    0 0 1px rgba(232,238,252,.9),
    0 0 6px rgba(125,249,255,.45);
  animation: revealPick .4s ease both;
}

.pick-num{
  position:absolute;
  left:16px;
  top:50%;
  transform: translateY(-50%);
  width:36px;
  height:36px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:18px;
  font-weight:900;
  background:#7df9ff;
  color:#0b0f17;
  box-shadow: 0 0 10px rgba(125,249,255,.9);
}

.pick-item.last-pick{
  color:#ffd166;
  text-shadow: 0 0 8px #ffd166, 0 0 18px rgba(255,209,102,.9), 0 0 30px rgba(255,209,102,.7);
  border-color:#ffd166;
}

.pick-item.last-pick .pick-num{
  background:#ffd166;
  box-shadow: 0 0 12px rgba(255,209,102,1);
}

@keyframes revealPick{
  from{ opacity:0; transform: translateY(10px) scale(.95); }
  to{ opacity:1; transform: translateY(0) scale(1); }
}


        }

  
    /* ---- Player Picks styling (scoped, grid-based to prevent overlap) ---- */
    #picksList li{
      display: grid;
      grid-template-columns: 64px 1fr; /* hard column for number */
      align-items: center;
      column-gap: 24px;

      padding: 20px 22px;
      border-radius: 18px;
      margin-bottom: 16px;
      font-family: var(--score-font);
      font-size: 28px;
      letter-spacing: .6px;

      border: 1px solid rgba(125,249,255,.35);
      box-shadow: 0 0 14px rgba(125,249,255,.12);
      text-shadow:
    0 0 1px rgba(232,238,252,.9),
    0 0 6px rgba(63,169,245,.45);

      opacity: 0;
      transform: translateY(10px) scale(.98);
      animation: pickReveal .42s ease forwards;
    }

    #picksList li:hover{
      transform: translateY(0) scale(1.03);
      box-shadow: 0 0 22px rgba(125,249,255,.28);
    }

    #picksList li.last-pick{
      border-color: rgba(255,214,102,.55);
      box-shadow: 0 0 18px rgba(255,214,102,.18);
      text-shadow: 0 0 3px #d4a017, 0 0 8px rgba(212,160,23,.7), 0 0 16px rgba(212,160,23,.55);
    }

    
    #picksList li.last-pick 
    .pickText{
      line-height: 1.15;
      word-break: break-word;
    }

    @keyframes pickReveal{
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

  
    /* ---- Player Picks layout with image ---- */
    .picks-wrap{
      display:block;
    }

    /* Picks stay inside the card, image floats outside visually */
    .picks-panel{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:18px;
      padding:16px;
    }

    .player-image{
      width:100%;
      border-radius:16px;
      border:1px solid var(--line);
      box-shadow: 0 0 18px rgba(0,0,0,.45);
      object-fit:cover;
    }

    @media (max-width: 720px){
      .picks-wrap{
        grid-template-columns: 1fr;
      }
    }

  
    
    /* Allow the photo to render outside the card bounds */
    


    .player-image{
      position: absolute;
      top: 32px;
      right: -240px; /* pushes image into black margin */
      width: 220px;
      border-radius:16px;
      border:none;
      box-shadow: 0 12px 30px rgba(0,0,0,.55);
    }

    @media (max-width: 1100px){
      .player-image{
        position: static;
        margin-top:24px;
        width:100%;
      }
    }

  

    /* ---- Deadpool sitting on the scoreboard ---- */
    .scoreboard-card{
      position: relative;
      overflow: visible;          /* allow Deadpool to sit outside the frame */
      margin-top: 200px;          /* space for Ozzy + Deadpool */
    }
    .deadpool-sit{
      position: absolute;
      top: -220px;               /* pull up so he "sits" on the top edge */
      left: 62%; /* nudged right to make room for Ozzy */
      transform: translateX(-50%);
      width: 240px;
      height: auto;
      z-index: 5;
      pointer-events: none;      /* never blocks clicks on the table/links */
      user-select: none;
      filter: drop-shadow(0 16px 26px rgba(0,0,0,.55));
    }
    @media (max-width: 720px){
      .scoreboard-card{ margin-top: 160px; 
      position: relative;
    
      overflow: visible;
    }
      .deadpool-sit{ top: -220px; width: 190px; left: 50%; }
    }
    @media (max-width: 420px){
      .scoreboard-card{ margin-top: 160px; 
      position: relative;
    
      overflow: visible;
    }
      .deadpool-sit{ top: -220px; width: 170px; left: 50%; }
    }

  
  /* Force-hide scoreboard title text entirely */
  #pageTitle{
    display: none !important;
  }


    /* ---- Mobile optimization ---- */
    @media (max-width: 720px){
      header{ padding: 14px 12px 8px; }
      main{ padding: 8px 12px 14px; }

      /* Make the top nav buttons a tidy grid (2 rows), with DO NOT PRESS full width */
      .nav-buttons{
        display: grid !important;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        width: 100%;
      }
      .nav-buttons .btn{
        width: 100%;
        justify-content: center;
        padding: 10px 10px;
        font-size: 14px;
        border-radius: 14px;
      }
      #dontPressBtn{ }

      /* Tighten the scoreboard card so it fits the screen */
      .scoreboard-card{ margin-top: 150px; }
      th, td{ padding: 9px 10px; }
      th{ font-size: 12px; }
      .rank{ font-size: 16px; width: 62px; }
      .player-cell{ font-size: 20px !important; }
      .score-cell{ font-size: 24px !important; }

      /* Instruction box keeps clear of the Deadpool image */
      .click-instruction{
        max-width: 100%;
        margin-right: 0;
      }
    }

    @media (max-width: 520px){
      .scoreboard-card{ margin-top: 140px; }
      .ozzy-top{ width: 260px; left: 12px; }
      .deadpool-sit{ width: 170px; }
      th, td{ padding: 8px 8px; }
      .player-cell{ font-size: 18px !important; letter-spacing: .6px !important; }
      .score-cell{ font-size: 22px !important; }
      .rank{ width: 56px; }
    }

    /* Player picks page: scale down the list on small screens */
    @media (max-width: 720px){
      #picksList li{
        font-size: 22px;
        padding: 16px 16px;
        grid-template-columns: 1fr; /* remove hard number column on mobile */
        column-gap: 0;
      }
      .pick-item{ font-size: 22px; padding-left: 18px; }
    }


    /* ---- Mobile-only Ozzy placement (above scoreboard) ---- */
    .ozzy-mobile{ display:none; }

    @media (max-width: 720px){
      .ozzy-mobile{
        display:block;
        width: min(360px, 92vw);
        height: auto;
        margin: 0 auto 14px;
        filter: drop-shadow(0 0 10px rgba(255,0,0,.55));
        user-select: none;
        pointer-events: none;
      }

      /* Hide the on-card Ozzy image on mobile to prevent stacking/overlap */
      .ozzy-top{ display:none !important; }

      /* Let the scoreboard sit normally; scrolling is OK */
      .scoreboard-card{ margin-top: 0 !important; }

      /* Scale Deadpool down so he can still "sit" on the frame */
      .deadpool-sit{
        width: 155px !important;
        top: -140px !important;
        left: 50% !important;
      }

      /* Give a little air above the card so Deadpool isn't clipped on some browsers */
      #view-scoreboard{ padding-top: 10px; }
    }

    @media (max-width: 420px){
      .deadpool-sit{
        width: 140px !important;
        top: -130px !important;
      }
    }


    /* ---- Mobile: remove tap/focus highlight boxes on picks ---- */
    @media (max-width: 720px){
      #picksList li,
      #picksList li a{
        outline: none !important;
        box-shadow: none !important;
        -webkit-tap-highlight-color: rgba(0,0,0,0);
      }
      #picksList li:focus,
      #picksList li:active,
      #picksList li a:focus,
      #picksList li a:active{
        outline: none !important;
        box-shadow: none !important;
      }
    }




    /* ---- Mobile: keep click-instruction BELOW Deadpool (and behind if ever overlapping) ---- */
    @media (max-width: 720px){
      /* Ensure Deadpool always layers above the instruction if they ever touch */
      .deadpool-sit{ z-index: 5 !important; }

      /* Push the instruction down far enough to avoid overlap */
      .click-instruction{
        position: relative;
        z-index: 1;                 /* behind Deadpool */
        margin-top: 120px;          /* clears Deadpool legs/feet zone */
        margin-left: 0;
        max-width: 92%;
      }
    }

    @media (max-width: 420px){
      .click-instruction{ margin-top: 110px; }
    }


  /* ---- Better mobile placement for click instruction ---- */
  .click-instruction-mobile{
    display:none;
    margin-top: 10px;
    padding: 10px 12px;
    text-align: left;
    width: 100%;
    font-size: 0.95em;
    font-weight: 600;
    color: #fff;
    background: rgba(196,0,0,0.15);
    border: 1px dashed #c40000;
    border-radius: 10px;
    letter-spacing: 0.3px;
    text-shadow: none !important;
    box-shadow: none !important;
  }
  .click-instruction-mobile strong{ color:#ff4d4d; }

  @media (max-width: 720px){
    /* show the header tip; hide the one that competes with Deadpool */
    .click-instruction-mobile{ display:block; }
    .scoreboard-card .click-instruction{ display:none !important; }
  }


    .leader-name{
      color:#ffd700 !important;
      text-shadow: 0 0 8px #ffd700, 0 0 16px rgba(255,215,0,.8), 0 0 26px rgba(255,215,0,.6) !important;
    }


    @keyframes leaderPulse{
      0%   { transform: scale(1); }
      50%  { transform: scale(1.04); }
      100% { transform: scale(1); }
    }

    .leader-name{
      animation: leaderPulse 2.2s ease-in-out infinite;
      display: inline-block;
    }

</style>






<!-- Click instruction emphasis -->
<style>
  .click-instruction{
    margin: 10px 0 14px 0;
    padding: 10px 14px;
    text-align: left;
    max-width: calc(100% - 140px); /* leaves room for Deadpool image on right */
    font-size: 0.95em;
    font-weight: 600;
    color: #fff;
    background: rgba(196,0,0,0.15);
    border: 1px dashed #c40000;
    border-radius: 10px;
    letter-spacing: 0.3px;
    text-shadow: none !important;
    box-shadow: none !important;
  }
  .click-instruction strong{
    color: #ff4d4d;
  }
</style>



<!-- Hide redundant subtitle under Scoreboard title -->
<style>
  #pageSubtitle{ display:none !important; }
</style>

</head>

<body>
  <header>
    <div class="row">
      <div>
        <div id="pageTitle" class="title-spacer" aria-hidden="true"></div>
        <div class="sub" id="pageSubtitle"></div>
      </div>
      <div class="row nav-buttons">
        <button class="btn" id="homeBtn" type="button" title="Go to scoreboard">üè† Scoreboard</button>
        <button class="btn" id="rulesBtn" type="button" title="View rules">üìú Rules</button>
        <button class="btn" id="azBtn" type="button" title="All picks A‚ÄìZ">üî§ PICKS A‚ÄìZ</button>
        <button class="btn" id="dontPressBtn" type="button" title="Definitely do not press">üü• DO NOT PRESS</button>
      </div>

      <div class="click-instruction-mobile" aria-live="polite">
        üëâ <strong>Tip:</strong> Tap a player‚Äôs name to view their picks
      </div>

    </div>
  </header>

  <main>
    <!-- SCOREBOARD VIEW -->
    <img src="./ozzy.png" alt="Dead Pool 2026" class="ozzy-mobile" />

    <section id="view-scoreboard" class="card scoreboard-card">
      <img src="./ozzy.png" alt="Dead Pool 2026" class="ozzy-top" />
      <img src="./deadpool.png" alt="" class="deadpool-sit" aria-hidden="true" />
      
<div class="click-instruction">
  üëâ <strong>Click a player‚Äôs name</strong> to view that person‚Äôs picks
</div>

<table aria-label="Scoreboard">
        <thead>
          <tr>
            <th class="rank">Rank</th>
            <th>Player</th>
            <th class="score right">Points</th>
          </tr>
        </thead>
        <tbody id="scoreRows"></tbody>
      </table>
    </section>

    <!-- PLAYER VIEW -->
    <section id="view-player" class="card hide">
      <div class="pad">
        <div class="row">
          <div>
            <div class="muted small"><a href="#/" id="backLink">‚Üê Back to Scoreboard</a></div>
            <h2 id="playerName" style="margin:8px 0 0; font-size:24px;">Player</h2>
            <div class="muted" id="playerMeta" style="margin-top:4px;"></div>
          </div>
          <div class="pill" id="playerPill">Player</div>
        </div>

        <div class="muted small" id="wikiTip" style="margin:10px 0 12px;">
          üîó Tip: <strong>Click a pick</strong> to open that person‚Äôs Wikipedia page
        </div>


        <ul id="picksList" class="list" aria-label="Picks list"></ul>
      </div>
    </section>

    <!-- RULES VIEW -->
    <section id="view-rules" class="card hide">
      <div class="pad">
        <h2 style="margin-top:0;">Rules</h2>
        <p class="muted">Add your rules here later.</p>
        <ul class="list">
          <li>8 PICKS, ONE HAS TO BE 30 OR UNDER</li>
          <li>IF THEY HAVE A WIKIPEDIA PAGE, THEY ARE FAMOUS ENOUGH TO BE ON YOUR LIST - BUT THEY CAN'T BE FAMOUS JUST FOR BEING SICK - NEW RULE COMING NEXT YEAR</li>
          <li>SCORING IS CALCULATED BY SUBTRACTING YOUR PICK'S AGE FROM 100</li>
          <li>POOL STARTS 2/1/26, ENDS 12/31/26</li>
          <li>TIE GOES TO WHOEVER SCORED FIRST</li>
          <li>IF IT'S STILL A TIE, THE TIED PLAYERS CAN EITHER SPLIT IT OR GUESS A NUMBER BETWEEN 1-100 </li>
        </ul>
      </div>
    </section>

    <!-- PICKS A-Z VIEW -->
    <section id="view-az" class="card hide">
      <div class="pad">
        <h2 style="margin-top:0;">All Picks (A‚ÄìZ)</h2>
        <p class="muted">Alphabetical list of every pick and who selected them.</p>
        <ul id="azList" class="list" aria-label="All picks A to Z"></ul>
      </div>
    </section>


</main>

  <script>
    /******************************************************************
     * DATA (EDIT HERE)
     * - points: number you manually enter
     * - picks: 8 strings (each player has their own list)
     ******************************************************************/
    const PLAYERS = [
      { id: 1, name: "Glenn", points: 0, note: "‚Äî", picks: ["Phil Collins","Richard Dreyfuss","Eric Dane","Bruce Willis","Billy Connolly","Alan Alda","Tylor Chase","Madison Beer"] },
      { id: 2, name: "Nancy", points: 0, note: "‚Äî", picks: ["Eric Dane","Ariana Grande","Jeffrey Dean Morgan","Tylor Chase","Billy Joel","Dave Coulier","Joe Exotic","Jessie Murph"] },
      { id: 3, name: "Lili", points: 0, note: "‚Äî", picks: ["Christa Pike","Wade Wilson (criminal)","Gypsy Rose Blanchard","Clint Eastwood","Tylor Chase","Eugenia Cooney","Bryan Kohberger","Jake Paul"] },
      { id: 4, name: "Travis", points: 0, note: "‚Äî", picks: ["Norman Reedus","Clint Eastwood","Mick Jagger","Al Pacino","Whoopi Goldberg","Bernie Sanders","Nancy Pelosi","Greta Thunberg"] },
      { id: 5, name: "Kori", points: 0, note: "‚Äî", picks: ["Bruce Willis","Phil Collins","Eric Dane","Bill Clinton","Ali Khamenei","Prince Andrew","Kurupt","Jack Veal"] },
      { id: 6, name: "Jack", points: 0, note: "‚Äî", picks: ["Dean Harrison","John McGuinness","Conor Cummins","David Irving","Ben Sasse","Michael Bolton","Esther Rantzen","Davey Todd"] },
      { id: 7, name: "Eric", points: 52, note: "‚Äî", picks: ["Bruce Willis","Michael J Fox","Eric Dane","Ray J","James Van Der Beek","Colleen Hoover","Quinton Aaron","Jaden Smith"] },
      { id: 8, name: "Bubs", points: 0, note: "‚Äî", picks: ["Bruce Willis","Michael J Fox","Nancy Pelosi","John Rhys-Davies","Mel Brooks","Clint Eastwood","Michael Caine","Nick Fuentes"] },
      { id: 9, name: "Stephanie", points: 0, note: "‚Äî", picks: ["Dolly Parton","Jack Nicholson","Robert Deniro","Axel Rose","Mick Jagger","Stevie Nicks","Taylor Swift","Chappell Roan"] },
      { id: 10, name: "Nik", points: 0, note: "‚Äî", picks: ["Sean Combs","Donald Trump","Joe Biden","Robert Downey Jr","Nicole Kidman","George Clooney","Jared Leto","Tom Holland"] },
    ];

    /******************************************************************
     * ROUTING
     * - #/           => scoreboard
     * - #/player/ID  => player page
     ******************************************************************/
    const elScoreView = document.getElementById("view-scoreboard");
    const elPlayerView = document.getElementById("view-player");
const elRulesView = document.getElementById("view-rules");
const elAzView = document.getElementById("view-az");

    const pageTitle = document.getElementById("pageTitle");
    const pageSubtitle = document.getElementById("pageSubtitle");

    const scoreRows = document.getElementById("scoreRows");

    const playerName = document.getElementById("playerName");
    const playerMeta = document.getElementById("playerMeta");
    const playerPill = document.getElementById("playerPill");
    const picksList = document.getElementById("picksList");

    const homeBtn = document.getElementById("homeBtn");
const rulesBtn = document.getElementById("rulesBtn");
const dontPressBtn = document.getElementById("dontPressBtn");
const azBtn = document.getElementById("azBtn");
homeBtn.addEventListener("click", () => { location.hash = "#/"; });
rulesBtn.addEventListener("click", () => { location.hash = "#/rules"; });
dontPressBtn.addEventListener("click", () => { window.open("https://youtu.be/xMHJGd3wwZk?list=RDxMHJGd3wwZk", "_blank", "noopener,noreferrer"); });
azBtn.addEventListener("click", () => { location.hash = "#/az"; });

    function escapeHTML(str){
      return String(str)
        .replaceAll("&","&amp;").replaceAll("<","&lt;")
        .replaceAll(">","&gt;").replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    
    function toWikiLink(text){
      const q = String(text ?? "").trim();
      if (!q) return escapeHTML(text);
      const url = "https://en.wikipedia.org/wiki/Special:Search?search=" + encodeURIComponent(q);
      return `<a href="${url}" target="_blank" rel="noopener noreferrer">${escapeHTML(text)}</a>`;
    }

    function renderScoreboard(){
      pageTitle.textContent = "Scoreboard";
      pageSubtitle.textContent = "";

      elScoreView.classList.remove("hide");
      elPlayerView.classList.add("hide");
      elRulesView.classList.add("hide");
      elAzView.classList.add("hide");
      elAzView.classList.add("hide");      // Sort by points desc, then name asc (stable display)
      
            const sorted = [...PLAYERS].sort((a, b) => {
        // Highest points first; tie-break by name
        if ((b.points ?? 0) !== (a.points ?? 0)) return (b.points ?? 0) - (a.points ?? 0);
        return String(a.name ?? "").localeCompare(String(b.name ?? ""));
      });

// store previous scores for animation
      if (!window._prevScores) window._prevScores = {};
    

      scoreRows.innerHTML = "";
      sorted.forEach((p, idx) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td class="rank">${"#" + (idx + 1)}</td>
          <td class="player-cell ${idx===0 ? "leader-name" : ""}" style="text-shadow: 0 0 6px #ff4ecd, 0 0 14px rgba(255,78,205,.8), 0 0 22px rgba(255,78,205,.6);"><a href="#/player/${encodeURIComponent(p.id)}">${escapeHTML(p.name)}</a></td>
          <td class="score score-cell right" style="font-weight:900; text-shadow: 0 0 8px #3ddc97, 0 0 18px rgba(61,220,151,.9), 0 0 30px rgba(61,220,151,.7);" data-id="${p.id}">${Number.isFinite(p.points) ? p.points : 0}</td>
        `;
        scoreRows.appendChild(tr);

        const scoreCell = tr.querySelector(".score");
        const prev = window._prevScores[p.id];
        if (prev !== undefined && prev !== p.points){
          scoreCell.style.transform = "scale(1.25)";
          scoreCell.style.color = "var(--good)";
          setTimeout(() => {
            scoreCell.style.transform = "scale(1)";
            scoreCell.style.color = "";
          }, 300);
        }
        window._prevScores[p.id] = p.points;
    
      });
    }

    function renderPlayer(id){
      const player = PLAYERS.find(p => String(p.id) === String(id)) || PLAYERS[0];

      pageTitle.textContent = "Player Picks";
      pageSubtitle.textContent = "Return to the scoreboard anytime.";

      elScoreView.classList.add("hide");
      elPlayerView.classList.remove("hide");
      elRulesView.classList.add("hide");
      elAzView.classList.add("hide");      playerName.textContent = player.name;
      playerMeta.textContent = `Points: ${Number.isFinite(player.points) ? player.points : 0} ‚Ä¢ 8 picks`;
      playerPill.textContent = `ID: ${player.id}`;

      // IMPORTANT: Do NOT replace the #picksList element.
      // Replacing it breaks subsequent navigation because the cached picksList reference
      // points to a detached element after the first click.
      const picksListEl = document.getElementById("picksList");
      picksListEl.innerHTML = "";

      const picks = Array.isArray(player.picks) ? player.picks : [];
      for (let i = 0; i < 8; i++){
        const pick = picks[i] ?? `Pick ${i + 1}`;
        const li = document.createElement("li");

        // Use your existing #picksList li styling; add last-pick class for the 8th item
        li.className = "pick-item" + (i === 7 ? " last-pick" : "");
        li.style.animationDelay = `${i * 90}ms`;

        li.innerHTML = `<span class="pickText">${toWikiLink(pick)}</span>`;
        picksListEl.appendChild(li);
      }
    }

    function route(){
      const hash = location.hash || "#/";
      // expected: #/ or #/player/3
      const parts = hash.replace(/^#\/?/, "").split("/").filter(Boolean);

      if (parts.length === 0){
        renderScoreboard();
        return;
      }

      if (parts[0] === "player" && parts[1]){
        renderPlayer(parts[1]);
        return;
      }

      if (parts[0] === "rules"){
        pageTitle.textContent = "Rules";
        pageSubtitle.textContent = "How the game works";
        elScoreView.classList.add("hide");
        elPlayerView.classList.add("hide");
        elRulesView.classList.remove("hide");
        elAzView.classList.add("hide");        return;
      }


      if (parts[0] === "az"){
        pageTitle.textContent = "Picks A‚ÄìZ";
        pageSubtitle.textContent = "";

        elScoreView.classList.add("hide");
        elPlayerView.classList.add("hide");
        elRulesView.classList.add("hide");
        elAzView.classList.remove("hide");

        const azList = document.getElementById("azList");
        azList.innerHTML = "";

        // Map pick -> [player names...]
        const pickMap = new Map();
        PLAYERS.forEach(p => {
          (Array.isArray(p.picks) ? p.picks : []).forEach(rawPick => {
            const pick = String(rawPick ?? "").trim();
            if (!pick) return;
            if (!pickMap.has(pick)) pickMap.set(pick, []);
            pickMap.get(pick).push(p.name);
          });
        });

        // Sort picks by LAST NAME (ignoring parenthetical qualifiers), then full name
        const lastNameKey = (name) => {
          const s = String(name ?? "").trim();
          // remove parenthetical like "Wade Wilson (criminal)"
          const noParen = s.replace(/\s*\([^)]*\)\s*/g, " ").trim();

          // Special case: treat "Van Der X" as starting with V
          const vanDerMatch = noParen.match(/\bVan\s+Der\s+(.+)$/i);
          if (vanDerMatch) {
            return ("van der " + vanDerMatch[1]).toLowerCase();
          }

          const parts = noParen.split(/\s+/).filter(Boolean);
          const last = parts.length ? parts[parts.length - 1] : noParen;
          return last.toLowerCase();
        };

        [...pickMap.keys()]
          .sort((a,b) => {
            const la = lastNameKey(a);
            const lb = lastNameKey(b);
            const c = la.localeCompare(lb, undefined, { sensitivity: "base" });
            if (c !== 0) return c;
            return String(a).localeCompare(String(b), undefined, { sensitivity: "base" });
          })
          .forEach(pick => {
            const who = pickMap.get(pick) || [];
            const li = document.createElement("li");
            li.innerHTML =
              `${toWikiLink(pick)}` +
              `<div class="muted small">Picked by: ${who.map(escapeHTML).join(", ")}</div>`;
            azList.appendChild(li);
          });

        return;
      }

      // fallback
      location.hash = "#/";
    }

    window.addEventListener("hashchange", route);
    route();
    
  </script>

<!-- Deadpool intro sound (plays once per browser) -->
<audio id="deadpool-intro" src="deadpool.mp3" preload="auto"></audio>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const audio = document.getElementById("deadpool-intro");
  if (!audio) return;

  audio.volume = 0.9;

  const tryPlay = () => {
    const p = audio.play();
    if (p && typeof p.catch === "function") {
      p.catch(() => {
        // Autoplay blocked: play on first user interaction
        const unlock = () => {
          audio.play().catch(() => {});
        };
        ["pointerdown","touchstart","keydown","click"].forEach(evt => {
          document.addEventListener(evt, unlock, { once: true, passive: true });
        });
      });
    }
  };

  // Try immediately, then once more shortly after (some browsers need a tick)
  tryPlay();
  setTimeout(tryPlay, 350);
});
</script>


<!--
VERIFICATION:
The scoreboard rows are sorted dynamically by score (highest to lowest).
When scores change, the JavaScript re-sorts the table so rankings update automatically.
Nancy is initially placed at the top only as a default display state.
-->

</body>
</html>
